<UserControl x:Class="RX_DigiPrint.Views.SupervisorsView.SupervisorsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:rx_uc="clr-namespace:RX_DigiPrint.Views.UserControls"
             xmlns:common="clr-namespace:RX_Common;assembly=rx_common_lib_cs"
             xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
             xmlns:Controls="clr-namespace:Microsoft.Toolkit.Wpf.UI.Controls;assembly=Microsoft.Toolkit.Wpf.UI.Controls.WebView"
             xmlns:rx="clr-namespace:RX_DigiPrint.Helpers"
             xmlns:ig="http://schemas.infragistics.com/xaml"
             xmlns:igDP="http://infragistics.com/DataPresenter"
             xmlns:local="clr-namespace:RX_DigiPrint.Views.SupervisorsView"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="1100">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="70" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="auto"/>
        </Grid.ColumnDefinitions>

        <Grid Grid.Row="0" Grid.ColumnSpan="2" Grid.Column="0" Background="{StaticResource Mouvent.MainColorBrush}" ShowGridLines="False" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="auto"/>
            </Grid.ColumnDefinitions>

            <rx_uc:MouventTopToolBar Grid.Row="0" HorizontalAlignment="Right"></rx_uc:MouventTopToolBar>

            <StackPanel Background="{StaticResource Mouvent.MainColorBrush}" Grid.ColumnSpan="2" Orientation="Horizontal" HorizontalAlignment="Left">
                <common:MvtButton Margin="0, 0, 15, 0" Style="{StaticResource Mouvent.RoundIconButtonStyle.DarkBackgroundButton.SizeL}" x:Name="AddSupervisor" ToolTip="Add a supervisor" Click="AddSupervisor_clicked" >
                    <iconPacks:PackIconMaterial HorizontalAlignment="Stretch" VerticalAlignment="Center"
                        Style="{StaticResource Mouvent.RoundIconButtonStyle.LightIcon}" Width="20" Height="20" Kind="Plus"></iconPacks:PackIconMaterial>
                </common:MvtButton>

                <common:MvtButton Margin="0, 0, 15, 0" Visibility="Hidden" Style="{StaticResource Mouvent.RoundIconButtonStyle.DarkBackgroundButton.SizeL}" x:Name="RemoveSupervisor" ToolTip="Remove a supervisor" Click="RemoveSupervisor_clicked" >
                    <iconPacks:PackIconMaterial HorizontalAlignment="Stretch" VerticalAlignment="Center" 
                        Style="{StaticResource Mouvent.RoundIconButtonStyle.LightIcon}" Width="20" Height="20" Kind="Minus"></iconPacks:PackIconMaterial>
                </common:MvtButton>

                <common:MvtButton Margin="0, 0, 15, 0" Visibility="Hidden" Style="{StaticResource Mouvent.RoundIconButtonStyle.DarkBackgroundButton.SizeL}" x:Name="ChangeValidity" ToolTip="Change a supervisor's validity" Click="ChangeValidity_clicked" >
                    <iconPacks:PackIconMaterial HorizontalAlignment="Stretch" VerticalAlignment="Center" 
                        Style="{StaticResource Mouvent.RoundIconButtonStyle.LightIcon}" Width="20" Height="20" Kind="Calendar"></iconPacks:PackIconMaterial>
                </common:MvtButton>
                <common:MvtButton Margin="0, 0, 15, 0" Visibility="Hidden" Style="{StaticResource Mouvent.RoundIconButtonStyle.DarkBackgroundButton.SizeL}" x:Name="ShowCode" ToolTip="Show Supervisor's authenticator codes" Click="ShowCode_Click" >
                    <iconPacks:PackIconMaterial HorizontalAlignment="Stretch" VerticalAlignment="Center" 
                        Style="{StaticResource Mouvent.RoundIconButtonStyle.LightIcon}" Width="20" Height="20" Kind="Qrcode"></iconPacks:PackIconMaterial>
                </common:MvtButton>
            </StackPanel>
        </Grid>
        <ig:XamGrid
                x:Name="SupervisorsGrid"
                Grid.Row="1"
                Grid.Column="0"
                AutoGenerateColumns="False"
                HeaderStyle="{DynamicResource XamGridHeaderStyle}"
                CellStyle="{DynamicResource XamGridCellControlStyle}"
                Style="{DynamicResource XamGrid-WideScroll-Style}"
                RowHeight="Dynamic"
                MinimumRowHeight="36"
                RowHover="Row"
                Background="Transparent"
                SelectedRowsCollectionChanged="SupervisorsGrid_SelectedRowsCollectionChanged"
                BorderBrush="Transparent"
                Margin="10"
                >
            <ig:XamGrid.SelectionSettings>
                <ig:SelectionSettings CellClickAction="SelectRow"/>
            </ig:XamGrid.SelectionSettings>
            <ig:XamGrid.Columns>
                <ig:TextColumn Key="Username" TextBlockStyle="{StaticResource XamGridTextBlockStyle}" HeaderText="Username" Width="auto"/>
                <ig:TextColumn Key="Validity" TextBlockStyle="{StaticResource XamGridTextBlockStyle}" HeaderText="Validity" Width="*"/>
            </ig:XamGrid.Columns>

        </ig:XamGrid>
        <!--<igDP:XamDataGrid
            x:Name="SupervisorsGrid"
            Grid.Row="1"
            Grid.Column="0"
            BorderBrush="Transparent"
            Style="{DynamicResource XamDataGrid-WideScroll-Style}"
            SelectedItemsChanged="SupervisorsGrid_SelectedItemsChanged"
            Margin="10">
            <igDP:XamDataGrid.Resources>
                --><!--<local:Base64ToImageConverter x:Key="Base64ToImageConverterKey"/>
                <Style TargetType="{x:Type igDP:CellValuePresenter}" x:Key="CodeQRCell">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type igDP:CellValuePresenter}">
                                <Grid Width="{TemplateBinding Width}" Height="{TemplateBinding Height}">
                                     The source of the image is the CodeQR field in Supervisor class, the converter is here to trasfrom it to be displayable 
                                    <Image Margin="{TemplateBinding Padding}"
                                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"                                          
                                        Source="{Binding Path=DataItem.CodeQR, Converter={StaticResource Base64ToImageConverterKey}}"/>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>-->
                <!--<Style TargetType="{x:Type igDP:LabelPresenter}">
                    <Setter Property="Background" Value="Black"/>
                    <Setter Property="Foreground" Value="White"/>
                    <Setter Property="LabelHighlight" Value="DarkOrange"/>
                </Style>--><!--
            </igDP:XamDataGrid.Resources>
            <igDP:XamDataGrid.FieldLayoutSettings>
                <igDP:FieldLayoutSettings AutoGenerateFields="False" HighlightAlternateRecords="True" SelectionTypeRecord="Single"/>
            </igDP:XamDataGrid.FieldLayoutSettings>
            <igDP:XamDataGrid.FieldSettings>
                <igDP:FieldSettings AllowEdit="false" CellClickAction="SelectRecord" CellPresenterStyle="{DynamicResource XamDataGridCellControlStyle}" LabelPresenterStyle="{DynamicResource XamDataGridHeaderStyle}"/>
            </igDP:XamDataGrid.FieldSettings>
            <igDP:XamDataGrid.FieldLayouts>
                <igDP:FieldLayout Key="supervisorLayout">
                    <igDP:FieldLayout.Fields>
                        <igDP:Field Name="Username" Label="Username" />
                        <igDP:Field Name="Validity" Label="Valid until"/>
                        --><!--<igDP:Field Name="CodeQR" Label="QR Code">
                            <igDP:Field.Settings>
                                <igDP:FieldSettings CellMinWidth="250" CellWidth="250"
                                        CellValuePresenterStyle="{StaticResource CodeQRCell}" />
                            </igDP:Field.Settings>
                        </igDP:Field>--><!--
                    </igDP:FieldLayout.Fields>
                </igDP:FieldLayout>
            </igDP:XamDataGrid.FieldLayouts>
        </igDP:XamDataGrid>-->
    </Grid>
</UserControl>
